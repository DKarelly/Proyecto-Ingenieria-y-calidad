<link rel="stylesheet" href="{{ url_for('static', filename='css/forms.css') }}">
<!-- Header Fijo -->
<header id="main-header" class="fixed top-0 left-0 w-full z-50 bg-white/80 backdrop-blur-sm transition-shadow duration-300">
    <div class="container mx-auto px-4 flex justify-between items-center py-4">
        <a href="/" class="flex items-center">
            <img src="{{ url_for('static', filename='images/logo1.png') }}" alt="Clínica Unión" class="h-12 w-auto">
        </a>
        <nav class="hidden md:flex items-center gap-8">
            <a href="/#nosotros" class="hover:text-cyan-500 transition-colors duration-300">Nosotros</a>
            <a href="/#servicios" class="hover:text-cyan-500 transition-colors duration-300">Servicios</a>
            <a href="/#especialidades" class="hover:text-cyan-500 transition-colors duration-300">Especialidades</a>
            <a href="/#contacto" class="hover:text-cyan-500 transition-colors duration-300">Contáctanos</a>
        </nav>
        <div class="flex items-center gap-4">
            {% if session.get('usuario_id') %}
            <div class="relative">
                <button id="userMenuBtn" class="w-10 h-10 bg-cyan-500 rounded-full flex items-center justify-center text-white font-bold hover:bg-cyan-600 transition-colors duration-300">
                    {{ session.get('nombre_usuario', '')[0].upper() }}
                </button>
                <div id="userMenuDropdown" class="hidden absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg py-1 z-10 border border-gray-100">
                    <a href="/usuarios/perfil" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" /></svg>
                        Perfil
                    </a>
                    {% if session.get('tipo_usuario') == 'empleado' and session.get('id_rol') in [1, 2, 3, 4, 5] %}
                    <a href="/admin/panel" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2 2z"/><path stroke-linecap="round" stroke-linejoin="round" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v2H8V5z" /></svg>
                        Dashboard
                    </a>
                    {% endif %}
                    <a href="/logout" class="flex items-center gap-3 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" /></svg>
                        Cerrar Sesión
                    </a>
                </div>
            </div>
            {% else %}
            <div id="user-auth-button" class="relative cursor-pointer">
                <div class="w-10 h-10 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300 transition-colors duration-300">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-user text-gray-600"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                </div>
            </div>
            {% endif %}
            <button id="mobile-menu-button" class="md:hidden">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-menu"><line x1="4" x2="20" y1="12" y2="12"/><line x1="4" x2="20" y1="6" y2="6"/><line x1="4" x2="20" y1="18" y2="18"/></svg>
            </button>
        </div>
    </div>
</header>

<script>
    // Menú desplegable del usuario en header principal
    document.addEventListener('DOMContentLoaded', function() {
        const userMenuBtn = document.getElementById('userMenuBtn');
        const userMenuDropdown = document.getElementById('userMenuDropdown');

        if (userMenuBtn && userMenuDropdown) {
            userMenuBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                userMenuDropdown.classList.toggle('hidden');
            });

            // Cerrar el menú al hacer clic fuera
            document.addEventListener('click', function(e) {
                if (!userMenuBtn.contains(e.target) && !userMenuDropdown.contains(e.target)) {
                    userMenuDropdown.classList.add('hidden');
                }
            });
        }
    });
</script>

<!-- Menú Móvil -->
<div id="mobile-menu" class="fixed top-0 right-0 h-full w-64 bg-white shadow-lg z-[60] p-6 transform translate-x-full md:hidden">
    <div class="flex justify-between items-center mb-8">
        <h2 class="text-xl font-bold">Menú</h2>
        <button id="mobile-menu-close">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg>
        </button>
    </div>
    <nav class="flex flex-col gap-6">
        <a href="/#nosotros" class="text-lg hover:text-cyan-500 transition-colors duration-300 mobile-link">Nosotros</a>
        <a href="/#servicios" class="text-lg hover:text-cyan-500 transition-colors duration-300 mobile-link">Servicios</a>
        <a href="/#especialidades" class="text-lg hover:text-cyan-500 transition-colors duration-300 mobile-link">Especialidades</a>
        <a href="/#contacto" class="text-lg hover:text-cyan-500 transition-colors duration-300 mobile-link">Contáctanos</a>
    </nav>
</div>
