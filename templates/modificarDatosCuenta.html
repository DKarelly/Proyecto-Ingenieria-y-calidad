<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modificar Datos de Cuenta - Clínica Union</title>
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?display=swap&family=Inter:wght@400;500;600;700;900&family=Noto+Sans:wght@400;500;700;900">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-[#f8fafc] font-['Inter']">
    
    {% include 'header_admin.html' %}

    <div class="max-w-7xl mx-auto p-6 md:p-10">
        <!-- Botón de regreso -->
        <div class="mb-6">
            <a href="/cuentas" class="inline-flex items-center text-gray-600 hover:text-cyan-600 transition-colors">
                <i class="fas fa-arrow-left mr-2"></i>
                <span class="font-medium">Volver al Panel de Cuentas</span>
            </a>
        </div>

        <!-- Título -->
        <div class="mb-8">
            <h1 class="text-3xl font-bold text-gray-800">Modificar Datos de Cuenta</h1>
            <p class="text-gray-600 mt-2">Actualiza la información del empleado</p>
        </div>

        <!-- Formulario -->
        <div class="bg-white rounded-2xl shadow-lg border border-gray-200 p-8">
            <form method="POST" enctype="multipart/form-data" class="space-y-6">
                
                <!-- Foto de Perfil -->
                <div class="grid grid-cols-1 gap-6">
                    <div>
                        <label for="foto_perfil" class="block text-sm font-semibold text-gray-700 mb-2">
                            Foto de Perfil
                        </label>
                        <input 
                            type="file" 
                            id="foto_perfil" 
                            name="foto_perfil" 
                            accept="image/*"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                        >
                    </div>
                </div>

                <!-- Nombres y Apellidos -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="nombres" class="block text-sm font-semibold text-gray-700 mb-2">
                            Nombres <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="nombres" 
                            name="nombres" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: Juan Carlos"
                        >
                    </div>
                    <div>
                        <label for="apellidos" class="block text-sm font-semibold text-gray-700 mb-2">
                            Apellidos <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="apellidos" 
                            name="apellidos" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: Pérez López"
                        >
                    </div>
                </div>

                <!-- Documento y Teléfono -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="documento" class="block text-sm font-semibold text-gray-700 mb-2">
                            Documento de Identidad <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="documento" 
                            name="documento" 
                            required
                            maxlength="8"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="DNI (8 dígitos)"
                        >
                    </div>
                    <div>
                        <label for="telefono" class="block text-sm font-semibold text-gray-700 mb-2">
                            Teléfono <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="tel" 
                            id="telefono" 
                            name="telefono" 
                            required
                            maxlength="9"
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: 987654321"
                        >
                    </div>
                </div>

                <!-- Fecha de Nacimiento y Email -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="fecha_nacimiento" class="block text-sm font-semibold text-gray-700 mb-2">
                            Fecha de Nacimiento <span class="text-red-500">*</span>
                        </label>
                        <div class="relative">
                            <input 
                                type="date" 
                                id="fecha_nacimiento" 
                                name="fecha_nacimiento" 
                                required
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            >
                            <i class="fas fa-calendar-alt absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 pointer-events-none"></i>
                        </div>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-semibold text-gray-700 mb-2">
                            Correo Electrónico <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="email" 
                            id="email" 
                            name="email" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="ejemplo@clinica.com"
                        >
                    </div>
                </div>

                <!-- Departamento, Provincia y Distrito -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <label for="departamento" class="block text-sm font-semibold text-gray-700 mb-2">
                            Departamento <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="departamento" 
                            name="departamento" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: Lima"
                        >
                    </div>
                    <div>
                        <label for="provincia" class="block text-sm font-semibold text-gray-700 mb-2">
                            Provincia <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="provincia" 
                            name="provincia" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: Lima"
                        >
                    </div>
                    <div>
                        <label for="distrito" class="block text-sm font-semibold text-gray-700 mb-2">
                            Distrito <span class="text-red-500">*</span>
                        </label>
                        <input 
                            type="text" 
                            id="distrito" 
                            name="distrito" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                            placeholder="Ej: Miraflores"
                        >
                    </div>
                </div>

                <!-- Contraseña y Rol -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="password" class="block text-sm font-semibold text-gray-700 mb-2">
                            Contraseña <span class="text-gray-500 text-xs">(Dejar en blanco para no cambiar)</span>
                        </label>
                        <div class="relative">
                            <input 
                                type="password" 
                                id="password" 
                                name="password"
                                class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors pr-10"
                                placeholder="Nueva contraseña"
                            >
                            <button 
                                type="button" 
                                onclick="togglePassword('password')"
                                class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600"
                            >
                                <i class="fas fa-eye" id="password-eye"></i>
                            </button>
                        </div>
                    </div>
                    <div>
                        <label for="rol" class="block text-sm font-semibold text-gray-700 mb-2">
                            Rol <span class="text-red-500">*</span>
                        </label>
                        <select 
                            id="rol" 
                            name="rol" 
                            required
                            class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors"
                        >
                            <option value="">Seleccione un rol</option>
                            <option value="administrador">Administrador</option>
                            <option value="medico">Médico</option>
                            <option value="enfermero">Enfermero</option>
                            <option value="recepcionista">Recepcionista</option>
                        </select>
                    </div>
                </div>

                <!-- Descripción -->
                <div>
                    <label for="descripcion" class="block text-sm font-semibold text-gray-700 mb-2">
                        Descripción Corta
                    </label>
                    <textarea 
                        id="descripcion" 
                        name="descripcion" 
                        rows="4"
                        class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-cyan-200 focus:border-cyan-500 transition-colors resize-none"
                        placeholder="Escribe una breve descripción del empleado..."
                    ></textarea>
                </div>

                <!-- Botones -->
                <div class="flex flex-col sm:flex-row gap-4 pt-4">
                    <button 
                        type="submit"
                        class="flex-1 bg-cyan-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-cyan-700 transition-colors shadow-md hover:shadow-lg"
                    >
                        <i class="fas fa-save mr-2"></i>
                        Guardar Cambios
                    </button>
                    <a 
                        href="/cuentas/gestionar-cuentas-internas"
                        class="flex-1 bg-gray-200 text-gray-700 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 transition-colors text-center"
                    >
                        <i class="fas fa-times mr-2"></i>
                        Cancelar
                    </a>
                </div>
            </form>
        </div>
    </div>

    {% include 'footer.html' %}

    <script>
        // Toggle password visibility
        function togglePassword(fieldId) {
            const field = document.getElementById(fieldId);
            const eye = document.getElementById(fieldId + '-eye');
            
            if (field.type === 'password') {
                field.type = 'text';
                eye.classList.remove('fa-eye');
                eye.classList.add('fa-eye-slash');
            } else {
                field.type = 'password';
                eye.classList.remove('fa-eye-slash');
                eye.classList.add('fa-eye');
            }
        }

        // Validación de formulario
        document.querySelector('form').addEventListener('submit', function(e) {
            const documento = document.getElementById('documento').value;
            const telefono = document.getElementById('telefono').value;

            // Validar DNI (8 dígitos)
            if (!/^\d{8}$/.test(documento)) {
                e.preventDefault();
                alert('El DNI debe tener 8 dígitos');
                return;
            }

            // Validar teléfono (9 dígitos)
            if (!/^\d{9}$/.test(telefono)) {
                e.preventDefault();
                alert('El teléfono debe tener 9 dígitos');
                return;
            }
        });
    </script>
</body>
</html>
